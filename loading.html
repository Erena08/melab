<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>診断中</title>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      font-family: 'Inter', sans-serif;
      background-color: #FFF8E7;
    }

    .container {
      max-width: 420px;
      margin: 0 auto;
      background-color: #fffaf1;
      min-height: 100svh;
      height: calc(var(--vh, 1vh) * 100);
      display: flex;
      flex-direction: column;
      position: relative;

      /*
      background-image: url('melab_background.png'); 
      background-repeat: no-repeat;
      background-position: bottom right;
      background-size: 38%;
      */
    }

    header {
      background: linear-gradient(to right, #c3f8b2, #84b6f4);
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 5vh 5vw 1.5vh 5vw;
      font-weight: bold;
    }

    .header-title {
      color: #FFF;
      font-family: "SF Pro Text", sans-serif;
      font-size: clamp(16px, 4vw, 20px);
      font-style: normal;
      font-weight: 700;
      line-height: normal;
      padding-bottom: 0.5vh;
    }

    .back, .menu {
      font-size: 6vw;
      color: #fff;
    }

    .flask {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    #loadingText {
      color: #999;
      font-size: 4vw;
      padding-top: 20px;
      animation: dots 1.5s steps(3, end) infinite;
    }

    @keyframes dots {
      0% { content: "診断中"; }
      33% { content: "診断中."; }
      66% { content: "診断中.."; }
      100% { content: "診断中..."; }
    }

    @media (min-width: 768px) {
      .header-title { font-size: 20px; }
      #loadingText { font-size: 16px; }
      .back, .menu { font-size: 20px; }
    }
  </style>

  <script>
    function setVh() {
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', `${vh}px`);
    }

    window.addEventListener('load', setVh);
    window.addEventListener('resize', setVh);
  </script>
</head>

<body>
  <div class="container">
    <header>
      <span class="back" onclick="goBackToStep2()">←</span>
      <h1 class="header-title">MeLAB</h1>
      <span class="menu">☰</span>
    </header>

    <div class="flask">
      <img src="Group 1.png" alt="フラスコ" id="flask" style="width: 25%;">
      <div id="loadingText">診断中...</div>
    </div>
  </div>

  <script>
    // フラスコアニメーション（交互に切り替える）
    const flaskImg = document.getElementById("flask");
    const flaskImages = ["Group 1.png", "Group 2.png"];
    let currentImg = 0;
    setInterval(() => {
      currentImg = 1 - currentImg;
      flaskImg.src = flaskImages[currentImg];
    }, 1000);

    // ページ遷移（例：4秒後に result.html へ）
    setTimeout(() => {
      window.location.href = "result.html";
    }, 4000);

    // STEP2に戻る時は選択肢をリセット
    function goBackToStep2() {
      localStorage.removeItem('step3_choice');
      window.location.href = 'step3.html';
    }
  </script>
</body>
</html>
